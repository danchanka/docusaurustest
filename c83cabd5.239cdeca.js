(window.webpackJsonp=window.webpackJsonp||[]).push([[270],{338:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return h}));var o=n(3),r=n(7),a=(n(0),n(419)),i={title:"How-to: Events"},c={unversionedId:"How-to_Events",id:"How-to_Events",isDocsHomePage:!1,title:"How-to: Events",description:"Example 1",source:"@site/docs\\How-to_Events.md",slug:"/How-to_Events",permalink:"/docusaurustest/docs/How-to_Events",editUrl:"https://github.com/danchanka/docusaurustest/edit/master/docs/How-to_Events.md",version:"current",sidebar:"docs",previous:{title:"How-to: SEEK",permalink:"/docusaurustest/docs/How-to_SEEK"},next:{title:"How-to: Declarative logic",permalink:"/docusaurustest/docs/How-to_Declarative_logic"}},l=[],s={toc:l};function h(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h5",{id:"example-1"},"Example 1"),Object(a.b)("h6",{id:"condition"},"Condition"),Object(a.b)("p",null,"We have an order with a date, a number and a marker of whether it is closed."),Object(a.b)("p",null,"We need to make it so that orders are closed automatically at the end of the day."),Object(a.b)("h6",{id:"solution"},"Solution"),Object(a.b)("p",null,"In the first case, the event will only be executed in one transaction at the time the expression inside the ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docusaurustest/docs/Change_operators_SET_CHANGED_..._"}),"SET")," operator changes. That is, at the moment when the order date becomes smaller than the current date. However, if the user manually changes the order date to one greater than the current date and saves, the system will automatically execute this event and close the order. Therefore, the second option is preferable, since it will only come into effect when the current date changes at midnight."),Object(a.b)("h5",{id:"example-2"},"Example 2"),Object(a.b)("h6",{id:"condition-1"},"Condition"),Object(a.b)("p",null,"Similar to ",Object(a.b)("strong",{parentName:"p"},"Example 1"),", but the order contains lines with quantity, price and total."),Object(a.b)("p",null,"We need to make it so that when the price or quantity changes, their product is automatically written to the total amount."),Object(a.b)("h6",{id:"solution-1"},"Solution"),Object(a.b)("p",null,"Events of type ",Object(a.b)("strong",{parentName:"p"},"LOCAL")," count all property changes relative not to the state of the database but to the values at the time of the previous occurrence of this event (or rather, the end of its handling). We need to check that ",Object(a.b)("strong",{parentName:"p"},"sum")," has not changed, to avoid erasing changes made by previous changes. For example, if order lines have been imported from a file, in which the quantity, price and amount are recorded, then this event will not be triggered."),Object(a.b)("h5",{id:"example-3"},"Example 3"),Object(a.b)("h6",{id:"condition-2"},"Condition"),Object(a.b)("p",null,"Similar to\xa0",Object(a.b)("strong",{parentName:"p"},"Example 2"),", but a book is specified for the order line. Each book also has a default price."),Object(a.b)("p",null,"We need to make sure that when the book is changed, the price is automatically set to the order line. This event should only work on the order edit form."),Object(a.b)("h6",{id:"solution-2"},"Solution"),Object(a.b)("p",null,"Event"),Object(a.b)("h5",{id:"example-1-1"},"Example 1"),Object(a.b)("h6",{id:"condition-3"},"Condition"),Object(a.b)("p",null,"We have an order with a date, a number and a marker of whether it is closed."),Object(a.b)("p",null,"We need to make it so that orders are closed automatically at the end of the day."),Object(a.b)("h6",{id:"solution-3"},"Solution"),Object(a.b)("p",null,"In the first case, the event will only be executed in one transaction at the time the expression inside the ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/docusaurustest/docs/Change_operators_SET_CHANGED_..._"}),"SET")," operator changes. That is, at the moment when the order date becomes smaller than the current date. However, if the user manually changes the order date to one greater than the current date and saves, the system will automatically execute this event and close the order. Therefore, the second option is preferable, since it will only come into effect when the current date changes at midnight."),Object(a.b)("h5",{id:"example-2-1"},"Example 2"),Object(a.b)("h6",{id:"condition-4"},"Condition"),Object(a.b)("p",null,"Similar to ",Object(a.b)("strong",{parentName:"p"},"Example 1"),", but the order contains lines for the quantity, price and total."),Object(a.b)("p",null,"We need to make it so that when the price or quantity changes, their product is automatically recorded as the total amount."),Object(a.b)("h6",{id:"solution-4"},"Solution"),Object(a.b)("p",null,"Events of type\xa0",Object(a.b)("strong",{parentName:"p"},"LOCAL"),"\xa0count all property changes relative not to the state of the database but to the values at the time of the previous occurrence of this event (or rather, the end of its handling). We need to check that ",Object(a.b)("strong",{parentName:"p"},"sum")," has not changed, to avoid erasing changes made by previous changes. For example, if order lines have been imported from a file, in which the quantity, price and amount are recorded, then this event will no longer take effect."),Object(a.b)("h5",{id:"example-3-1"},"Example 3"),Object(a.b)("h6",{id:"condition-5"},"Condition"),Object(a.b)("p",null,"Similar to\xa0",Object(a.b)("strong",{parentName:"p"},"Example 2"),", but a book is specified for the order line. Each book also has a default price."),Object(a.b)("p",null,"We need to make sure that when the book is changed, the price is automatically appended to the order line. This event should only work on the order edit form."),Object(a.b)("h6",{id:"solution-5"},"Solution"),Object(a.b)("p",null,"In this case, the event will be triggered only when the book is changed or set. When a book is dropped, the price will not change."),Object(a.b)("p",null,"Without the ",Object(a.b)("strong",{parentName:"p"},"FORMS")," block, this event would be triggered by any change to the order line book. For example, when an order was imported in any other form."),Object(a.b)("h5",{id:"example-4"},"Example 4"),Object(a.b)("h6",{id:"condition-6"},"Condition"),Object(a.b)("p",null,"Similar to\xa0",Object(a.b)("strong",{parentName:"p"},"Example 1"),"."),Object(a.b)("p",null,"We need to organize logging of the deletion of orders"),Object(a.b)("h6",{id:"solution-6"},"Solution"),Object(a.b)("p",null,"When deleting\xa0an order and triggering an event with the ",Object(a.b)("strong",{parentName:"p"},"DROPPED")," modifier, it is important to remember that the object no longer exists and all properties that take it as input will give ",Object(a.b)("strong",{parentName:"p"},"NULL")," values. Therefore, we need to access them not directly, but through the ",Object(a.b)("strong",{parentName:"p"},"PREV")," operator."))}h.isMDXComponent=!0},419:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),h=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=h(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=h(n),u=o,p=d["".concat(i,".").concat(u)]||d[u]||b[u]||a;return n?r.a.createElement(p,c(c({ref:t},s),{},{components:n})):r.a.createElement(p,c({ref:t},s))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);