(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{241:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return s}));var o=n(3),r=n(7),a=(n(0),n(423)),c={},i={unversionedId:"LSFUS/lsFusionHow-to_GROUP_SUM",id:"LSFUS/lsFusionHow-to_GROUP_SUM",isDocsHomePage:!1,title:"lsFusionHow-to_GROUP_SUM",description:"lsFusionHow-to: GROUP SUM",source:"@site/docs\\LSFUS\\lsFusionHow-to_GROUP_SUM.md",slug:"/LSFUS/lsFusionHow-to_GROUP_SUM",permalink:"/docusaurustest/docs/LSFUS/lsFusionHow-to_GROUP_SUM",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/LSFUS/lsFusionHow-to_GROUP_SUM.md",version:"current"},l=[],u={toc:l};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"lsfusionhow-to-group-sum"},"lsFusionHow-to: GROUP SUM"),Object(a.b)("h1",{id:"how-to-group-sum"},"How-to: GROUP SUM"),Object(a.b)("h5",{id:"example-1"},"Example 1"),Object(a.b)("h6",{id:"condition"},"Condition"),Object(a.b)("p",null,"We have a set of books associated with certain category."),Object(a.b)("p",null,"We need to calculate the current balance for a given book at the warehouse for the specific date (as of the morning, without the movements occured on that day)."),Object(a.b)("h6",{id:"solution"},"Solution"),Object(a.b)("p",null,"1\n2\n3\n4\n5// Option 1\nbalance1 'Balance as of date' (Book b, Stock s, DATE d) = GROUP SUM (IF out(Ledger l) THEN -quantity(l) ELSE quantity(l)) IF date(l) ","<"," d BY book(l), stock(l);\n// Option 2\nbalance2 'Balance as of date' (Book b, Stock s, DATE d) = currentBalance(b, s) (-) ","["," GROUP SUM (IF out(Ledger l) THEN -quantity(l) ELSE quantity(l)) IF date(l) ",">","= d BY book(l), stock(l)","]","(b, s);"),Object(a.b)("p",null,'The second option is preferable. Since requests usually refer to recent dates, the server will be calculating the result "retrospectively" from the current balance, thereby analyzing fewer records.'),Object(a.b)("h5",{id:"example-5"},"Example 5"),Object(a.b)("h6",{id:"condition-1"},"Condition"),Object(a.b)("p",null,"Similar to\xa0",Object(a.b)("strong",{parentName:"p"},"Example 3"),", except that we need to calculate the current balance for a given book across all the warehouses."),Object(a.b)("h6",{id:"solution-1"},"Solution"),Object(a.b)("p",null,"1currentBalance 'Current balance' (Book b) = GROUP SUM currentBalance(b, Stock s);"),Object(a.b)("p",null,"Unlike the current balance for all the warehouses, it is not reasonable to mark this property as MATERIALIZED if you have only few warehouses \u2014 otherwise, UPDATE CONFLICT may occur when several users try to write the movement of the same book at different warehouses simultaneously."))}s.isMDXComponent=!0},423:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=r.a.createContext({}),s=function(e){var t=r.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=s(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),b=s(n),d=o,f=b["".concat(c,".").concat(d)]||b[d]||p[d]||a;return n?r.a.createElement(f,i(i({ref:t},u),{},{components:n})):r.a.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,c=new Array(a);c[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var u=2;u<a;u++)c[u]=n[u];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);