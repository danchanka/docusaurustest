<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/docusaurustest/blog/rss.xml" title="lsfusion documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docusaurustest/blog/atom.xml" title="lsfusion documentation Blog Atom Feed"><title data-react-helmet="true">How-to_Frontend | lsfusion documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How-to_Frontend | lsfusion documentation"><meta data-react-helmet="true" name="description" content="lsFusionHow-to: Frontend"><meta data-react-helmet="true" property="og:description" content="lsFusionHow-to: Frontend"><meta data-react-helmet="true" property="og:url" content="https://danchanka.github.io/docusaurustest/docs/LSFUS/How-to_Frontend"><link data-react-helmet="true" rel="shortcut icon" href="/docusaurustest/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://danchanka.github.io/docusaurustest/docs/LSFUS/How-to_Frontend"><link rel="stylesheet" href="/docusaurustest/styles.157dcc77.css">
<link rel="preload" href="/docusaurustest/styles.e55eae6c.js" as="script">
<link rel="preload" href="/docusaurustest/runtime~main.97a8771c.js" as="script">
<link rel="preload" href="/docusaurustest/main.2f74c8f9.js" as="script">
<link rel="preload" href="/docusaurustest/1.15ad1152.js" as="script">
<link rel="preload" href="/docusaurustest/2.388c98e9.js" as="script">
<link rel="preload" href="/docusaurustest/354.30682d77.js" as="script">
<link rel="preload" href="/docusaurustest/355.8d0f0209.js" as="script">
<link rel="preload" href="/docusaurustest/f976f453.7196580a.js" as="script">
<link rel="preload" href="/docusaurustest/17896441.3e7729b0.js" as="script">
<link rel="preload" href="/docusaurustest/1c680acb.8296151e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/docusaurustest/"><img src="/docusaurustest/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/docusaurustest/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">lsfusion</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docusaurustest/docs/">Docs</a><a class="navbar__item navbar__link" href="/docusaurustest/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/danchanka/docusaurustest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docusaurustest/"><img src="/docusaurustest/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/docusaurustest/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">lsfusion</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docusaurustest/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docusaurustest/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/danchanka/docusaurustest" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">How-to_Frontend</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="lsfusionhow-to-frontend"></a>lsFusionHow-to: Frontend<a class="hash-link" href="#lsfusionhow-to-frontend" title="Direct link to heading">#</a></h1><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-to-frontend"></a>How-to: Frontend<a class="hash-link" href="#how-to-frontend" title="Direct link to heading">#</a></h1><p>The easiest way to organize the interaction of a React application with an application based on lsFusion is <a href="/docusaurustest/docs/LSFUS/Access_from_an_external_system">communication via the HTTP protocol</a> through the JSON API. To export a list of objects meeting a specified condition, it is most convenient to use the interface located at the eval/action Url. You can pass lsFusion program code to it in BODY, and it will then be executed. If you need to return data from your request, use the <a href="/docusaurustest/docs/LSFUS/EXPORT_operator">EXPORT</a> operator. By default it returns data in JSON format, which is then easily processed using JavaScript.</p><p>In these examples we will make requests without authorization. For the server to start accepting requests without authorization, you need to set the <strong>enableAPI</strong> option in the Administration/Settings form on the Settings tab to the value 2.</p><p>A safer way would be to create a separate action for each request, with an @@api marker. and set <strong>enableAPI</strong> to the value 0. In this case, the server will only accept requests for these specific actions and from an authorized user. Inside these actions, before starting processing you can check for availability to the user using the <strong>currentUser()</strong> property.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-1"></a>Example 1<a class="hash-link" href="#example-1" title="Direct link to heading">#</a></h5><p>For clarity, we implement the simple form from the <a href="/docusaurustest/docs/LSFUS/Score_table">Score table</a> example (in read-only mode).</p><p>We will implement reading flat data set as a function with one parameter â€“ the query text, â€“ to which EXPORT FROM is added on the left:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const url = &quot;https://demo.lsfusion.org/hockeystats/eval/action&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function select(script) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  const params = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method: &quot;post&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    body: &quot;EXPORT FROM &quot; + script</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return fetch(url, params).then(response =&gt; response.json());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>For example, a request with the following content</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">select(&quot;date(Game g), hostTeamName(g), hostGoals(g), guestGoals(g), guestTeamName(g), resultName(g)&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>will return JSON of the form</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;date&quot;:&quot;05.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostGoals&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestTeamName&quot;:&quot;New York Rangers&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostTeamName&quot;:&quot;Detroit Red Wings&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestGoals&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;resultName&quot;:&quot;ÐŸÐž&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;date&quot;:&quot;13.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostGoals&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestTeamName&quot;:&quot;Toronto Maple Leafs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostTeamName&quot;:&quot;Montreal Canadiens&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestGoals&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;resultName&quot;:&quot;ÐŸ&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;date&quot;:&quot;15.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostGoals&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestTeamName&quot;:&quot;Montreal Canadiens&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostTeamName&quot;:&quot;New York Rangers&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestGoals&quot;:5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;resultName&quot;:&quot;ÐŸ&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;date&quot;:&quot;17.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostGoals&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestTeamName&quot;:&quot;Detroit Red Wings&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;hostTeamName&quot;:&quot;Toronto Maple Leafs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;guestGoals&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;resultName&quot;:&quot;ÐŸÐ‘&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>It only remains to use this data as a state(s) for React component(s) (for example, using <a href="https://material-ui.com/" target="_blank" rel="noopener noreferrer">Material-UI</a>):</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-2"></a>Example 2<a class="hash-link" href="#example-2" title="Direct link to heading">#</a></h5><p>Let&#x27;s consider a slightly more complicated case, when you need to make parameterized queries depending on data selected by the user. For backend logic we&#x27;ll take the <a href="/docusaurustest/docs/LSFUS/Materials_management">Material Flow Management</a> example.</p><p>Suppose we need to build a form in which we need to show shipments, with the ability to filter by date and warehouse. And when the user selects a specific document, its lines should be displayed.</p><p>To implement a request to the backend to receive shipments with filtering, we declare a function:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const url = &quot;https://demo.lsfusion.org/mm/eval/action&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function select(script, data) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var formData = new FormData();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  formData.append(&quot;script&quot;, &quot;EXPORT FROM &quot; + script);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  for (var name in data) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    formData.append(name, data[name]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  const params = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method: &quot;post&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Content-type&quot;: &quot;multipart/form-data&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    body: formData</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return fetch(url, params).then(response =&gt; response.json());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The first <strong>select</strong> function makes a POST request with content typeÂ multipart/form-data, passing the text of the request to the server as its first parameter and the values of the request as its other parameters.</p><p>For example, a function call of the form</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">select(&quot;id = Shipment s, number(s) WHERE date(s) = $1&quot;, { date: new Date().toISOString().substr(0, 10) })</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>will return all shipments for today&#x27;s date. It should be noted that the name of the date parameter is not used in the backend, and can be absolutely anything. Only the order of the parameters is important.</p><p>For convenience, we also declare a function that will generate a request by adding to the filter only those parameters whose values are not null:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">function selectWhere(script, wheres) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var exprs = [], params = {};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  for (var i = 0; i &lt; wheres.length; i++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (wheres[i].value != null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exprs.push(wheres[i].expr + &quot;=$&quot; + (i + 1));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      params = { ...params, ...{ [&quot;p&quot; + i]: wheres[i].value } };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return select(script + (exprs.length &gt; 0 ? &quot; WHERE &quot; : &quot;&quot;) + exprs.join(&quot; AND &quot;), params);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The corresponding function call above can be replaced with:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">selectWhere(&quot;id = Shipment s, number(s)&quot;, [{ expr: &quot;date(s)&quot;, value : new Date().toISOString().substr(0, 10) }])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Using the requests described above, we implement the required logic. To do this, we define two components:</p><ul><li><strong>Shipments</strong>, which will display the list of documents using the List component (from Material-UI, as mentioned above). It will also contain a <strong>Filters</strong> component, using which the user will set the parameters for filtering.</li><li><strong>Details</strong>, which will display the lines of the selected document. If needed, it could be embedded in the <strong>Shipments</strong> component.</li></ul><p>The rest of the code will look like this:</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-3"></a>Example 3<a class="hash-link" href="#example-3" title="Direct link to heading">#</a></h5><p>We implement a simple CRUD interface for entering goods.</p><p>Since this will require changing the information in the database, we declare a function that will execute arbitrary code on the platform (with error handling):</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">function handleErrors(response) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (!response.ok) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    response.text().then(text =&gt; console.log(text));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    throw Error(response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return response;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function evaluate(script, data) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var formData = new FormData();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  formData.append(&quot;script&quot;, script);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  for (var name in data) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    formData.append(name, data[name]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  const params = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method: &quot;post&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Content-type&quot;: &quot;multipart/form-data&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    body: formData</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return fetch(url, params).then(handleErrors);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>For example, to create an item in the database you would need to execute the following code:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">evaluate(&quot;NEW s = Item { name(s) &lt;- $1; barcode(s) &lt;- $2; salePrice(s) &lt;- $3; APPLY; }&quot;, { name : &quot;My item&quot;, barcode : &quot;4341&quot;, salePrice : 2.34 } )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As in the examples above, the names of the parameters are not important: their order is what matters. The <a href="/docusaurustest/docs/LSFUS/APPLY_operator">APPLY</a> operator saves changes to the database. Without it, the data will not be saved and will be discarded upon completion of the request.</p><p>To change the attributes of the product, you can use the following code (where id is the product&#x27;s internal ID):</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">evaluate(&quot;FOR Item s = $0 DO { name(s) &lt;- $1; barcode(s) &lt;- $2; salePrice(s) &lt;- $3; APPLY; }&quot;, { id : 32494, name : &quot;My item&quot;, barcode : &quot;4341&quot;, salePrice : 2.34 })</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To delete a given product:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">evaluate(&quot;DELETE s WHERE s AS Item = $1; APPLY; &quot;, { id : 32494 })</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The code implementing the user interface may look like this:</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-4"></a>Example 4<a class="hash-link" href="#example-4" title="Direct link to heading">#</a></h5><p>In this example, we implement the ability to view and edit a list of documents with lines.</p><p>It will be necessary to pass the set of lines from a specific document to the server. So as to perform all the changes with one request, rather than having to make separate requests for each line, we will pass them as a parameter in a JSON-format file. To do this, we modify our <strong>evaluate</strong> function as follows:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">function isObject(obj) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return obj === Object(obj);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function evaluate(script, data) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var formData = new FormData();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  formData.append(&quot;script&quot;, script);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  console.log(data);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  for (var name in data) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (isObject(data[name]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      formData.append(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        new Blob([JSON.stringify(data[name])], { type: &quot;application/json&quot; })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else formData.append(name, data[name]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  const params = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    method: &quot;post&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Content-type&quot;: &quot;multipart/form-data&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    body: formData</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return fetch(url, params).then(handleErrors);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If an object is passed as a field in theÂ <strong>data</strong> object, it is now converted to JSON and passed as a file of type application/json.</p><p>In order to accept this file as the final parameter ($5 in this example) and update the lines by deleting the old ones and creating new ones, we will use the following code on the platform:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">IMPORT JSON FROM $5 AS FILE FIELDS LONG item, NUMERIC[16,3] quantity, NUMERIC[16,3] price, NUMERIC[16,3] sum DO </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NEW d = ShipmentDetail { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        shipment(d) &lt;- s; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        item(d) &lt;- GROUP MAX i AS Item IF LONG(i) = item; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        quantity(d) &lt;- quantity; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        price(d) &lt;- price; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        sum(d) &lt;- sum; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To parse the JSON we use the special <a href="/docusaurustest/docs/LSFUS/IMPORT_operator">IMPORT</a> operator. It assumes that it will receive a flat JSON as an array of objects with numerical fields <strong>item</strong>, <strong>quantity</strong>, <strong>price</strong> and <strong>sum</strong>. A <strong>ShipmentDetail</strong> will be created for each object. It is then linked to the corresponding object <strong>s</strong> of class <strong>Shipment</strong>. After this the SKU with the internal code equals to the passed one is written, and then the other properties are written. Parsing of more complex JSON can be found in examplesÂ <a href="/docusaurustest/docs/LSFUS/How-to_Data_import">How-to: Data import</a> andÂ <a href="/docusaurustest/docs/LSFUS/How-to_Interaction_via_HTTP_protocol">How-to: Interaction via HTTP protocol</a>.</p><p>Saving changes may violate a <a href="/docusaurustest/docs/LSFUS/Constraints">constraint</a>. In this case, the changes will not be saved to the database (however, they will remain in the <a href="/docusaurustest/docs/LSFUS/Change_sessions">change session</a>). In this event the value <strong>TRUE</strong> will be written to the <strong>canceled</strong> property, and a constraint message will be written to the <strong>applyMessage</strong> property. In order to handle this situation, we will use the following code on the platform:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">APPLY; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IF canceled() THEN </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    EXPORT FROM message = applyMessage();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If the changes fail the message is returned in the BODY of the response in JSON form with a single field <strong>applyMessage</strong>.</p><p>The final code that is passed to <strong>evaluate</strong> for, e.g., creating a document will look like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NEW s = Shipment {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    number(s) &lt;- $1; date(s) &lt;- $2; customer(s) &lt;- $3; stock(s) &lt;- $4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IMPORT JSON FROM $5 AS FILE FIELDS LONG item, NUMERIC[16,3] quantity, NUMERIC[16,3] price, NUMERIC[16,3] sum DO </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        NEW d = ShipmentDetail { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            shipment(d) &lt;- s; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            item(d) &lt;- GROUP MAX i AS Item IF LONG(i) = item; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            quantity(d) &lt;- quantity; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            price(d) &lt;- price; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            sum(d) &lt;- sum; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    APPLY; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IF canceled() THEN </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        EXPORT FROM message = applyMessage();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>For editing (first, existing lines are deleted), accordingly:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FOR Shipment s = $0 DO {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    number(s) &lt;- $1; date(s) &lt;- $2; customer(s) &lt;- $3; stock(s) &lt;- $4;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    DELETE ShipmentDetail d WHERE shipment(d) = s;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IMPORT JSON FROM $5 AS FILE FIELDS LONG item, NUMERIC[16,3] quantity, NUMERIC[16,3] price, NUMERIC[16,3] sum DO </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        NEW d = ShipmentDetail { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            shipment(d) &lt;- s; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            item(d) &lt;- GROUP MAX i AS Item IF LONG(i) = item; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            quantity(d) &lt;- quantity; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            price(d) &lt;- price; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            sum(d) &lt;- sum; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    APPLY; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IF canceled() THEN </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        EXPORT FROM message = applyMessage();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To handle the constraint violation error (since the response status will be 200 in this implementation in both cases), we assume that if the BODY of the answer is empty then there is no error. If there is any text, then this is the JSON containing the text of the constraint. For example, we can use the following code:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">evaluate(&quot;...&quot;).then(response =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    response.text().then(text =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (text === &quot;&quot;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // ok</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            console.log(JSON.parse(text).applyMessage);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The implementation of the entire task may look as follows:</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="example-5"></a>Example 5<a class="hash-link" href="#example-5" title="Direct link to heading">#</a></h5><p>By analogy with <strong>Example 1</strong>, we implement the Score table form with editing ability using the <a href="/docusaurustest/docs/LSFUS/Access-from-an-external-system_51216539.html#Accessfromanexternalsystem-form">Form API</a>. To use it, you need to link theÂ <a href="https://www.npmjs.com/package/@lsfusion/core" target="_blank" rel="noopener noreferrer">@lsfusion/core</a> library.</p><p>First of all, you need to initialize the form using the <strong>create</strong> function after loading the main component:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">componentDidMount() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  create(updateState =&gt; this.setState(updateState), url, {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: &quot;MainForm&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The first parameter passed is the callback function to which the initial state of the form will be passed after the response from the server:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;game&quot;:{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;list&quot;:[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;date&quot;:&quot;05.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostGoals&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestTeamName&quot;:&quot;New York Rangers&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostTeamName&quot;:&quot;Detroit Red Wings&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestGoals&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6054,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;resultName&quot;:&quot;ÐŸÐž&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;date&quot;:&quot;13.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostGoals&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestTeamName&quot;:&quot;Toronto Maple Leafs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostTeamName&quot;:&quot;Montreal Canadiens&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestGoals&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6063,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;resultName&quot;:&quot;ÐŸ&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;date&quot;:&quot;15.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostGoals&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestTeamName&quot;:&quot;Montreal Canadiens&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostTeamName&quot;:&quot;New York Rangers&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestGoals&quot;:5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6072,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;resultName&quot;:&quot;ÐŸ&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;date&quot;:&quot;17.02.19&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostGoals&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestTeamName&quot;:&quot;Detroit Red Wings&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;hostTeamName&quot;:&quot;Toronto Maple Leafs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;guestGoals&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6075,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;resultName&quot;:&quot;ÐŸÐ‘&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;value&quot;:6054</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &quot;team&quot;:{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;list&quot;:[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostSO&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsConceded&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostOT&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsScored&quot;:7,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWon&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;points&quot;:6,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonOT&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLost&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesPlayed&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;:&quot;Montreal Canadiens&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonSO&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;place&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6064</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostSO&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsConceded&quot;:4,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostOT&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsScored&quot;:4,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWon&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;points&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonOT&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLost&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesPlayed&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;:&quot;Detroit Red Wings&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonSO&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;place&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6057</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostSO&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsConceded&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostOT&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsScored&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWon&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;points&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonOT&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLost&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesPlayed&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;:&quot;Toronto Maple Leafs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonSO&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;place&quot;:3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:10993</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostSO&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsConceded&quot;:8,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLostOT&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;goalsScored&quot;:5,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWon&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;points&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonOT&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesLost&quot;:1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesPlayed&quot;:2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;:&quot;New York Rangers&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;gamesWonSO&quot;:0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;place&quot;:4,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;value&quot;:6061</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;value&quot;:6064</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The returned JSON also has other utility fields.</p><p>Object tables can be read from <strong>game.list</strong> and <strong>team.list</strong>Â respectively. Current objects are stored in <strong>game.value</strong> and <strong>team.value</strong>. We use this data to form two tables, of games and of teams. To mark the current row we use the equals function, which compares, for example, the values from <strong>game.value</strong> and <strong>game.list[&lt;row&gt;].value</strong>. This is necessary because <strong>value</strong> may contain more complex objects, if several objects are declared in the object group.</p><p>Until the form has loaded, the helper function <strong>formCreated</strong> returns <strong>false</strong> and tables are not displayed.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (!formCreated(this.state)) return &lt;div&gt;Loading&lt;/div&gt;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The <strong>numberOfPendingRequests</strong> function also lets us display on the form the number of requests to the server for which no response has yet been received.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{numberOfPendingRequests(this.state) &gt; 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ? &quot;Loading, number of requests : &quot; +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    numberOfPendingRequests(this.state)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    : &quot;&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/div&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Changing the current object on the form and the values of its properties is done using the <strong>change</strong> function.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">change(updateState =&gt; this.setState(updateState), changes);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>It takes a callback that will change the current state and an object that stores a list of changes. The current state of the form (the App object) is constantly updated after each call to <strong>change</strong> with new values, taking into account changes made earlier by the user.</p><p>For example, to change the currently selected game we can use the following call:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">change(updateState =&gt; this.setState(updateState), { game : { value : 6063 } });</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Here 6063 is the <strong>value</strong> of the selected object.</p><p>To change the value of a property, we can use the following code:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">change(updateState =&gt; this.setState(updateState), { game : { value : 6063, hostGoals : 3 } });</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This call changes the current object to the game with the ID 6063 and the value of the host team&#x27;s goals to the passed value (3). If you do not pass the <strong>value</strong> tag, then the goal change will be made for the previously selected game.</p><p>The same scheme is used to change properties that are not data, but are a simple <a href="/docusaurustest/docs/LSFUS/Composition_JOIN_">composition</a> of object properties:Â </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">change(updateState =&gt; this.setState(updateState), { game : { value : 6063, hostTeamName: &quot;Montreal Canadiens&quot; } });</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The system itself will find the team with the given name and change the value of the host team to the one it finds.</p><p>To select a team from the list, you can use the <a href="https://github.com/JedWatson/react-select" target="_blank" rel="noopener noreferrer">react-select</a> component. Reading of many teams can be organized using the <strong>select</strong> function declared in the first example.</p><p>The following shows the fully working source code:</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/danchanka/docusaurustest/edit/master/docs/LSFUS/How-to_Frontend.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docusaurustest/docs/index">lsf docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://ru.stackoverflow.com/questions/tagged/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://slack.lsfusion.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/lsfusion" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docusaurustest/blog">Blog</a></li><li class="footer__item"><a href="https://habr.com/ru/company/lsfusion/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Habr</a></li><li class="footer__item"><a href="https://github.com/danchanka/docusaurustest" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 lsFusion Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docusaurustest/styles.e55eae6c.js"></script>
<script src="/docusaurustest/runtime~main.97a8771c.js"></script>
<script src="/docusaurustest/main.2f74c8f9.js"></script>
<script src="/docusaurustest/1.15ad1152.js"></script>
<script src="/docusaurustest/2.388c98e9.js"></script>
<script src="/docusaurustest/354.30682d77.js"></script>
<script src="/docusaurustest/355.8d0f0209.js"></script>
<script src="/docusaurustest/f976f453.7196580a.js"></script>
<script src="/docusaurustest/17896441.3e7729b0.js"></script>
<script src="/docusaurustest/1c680acb.8296151e.js"></script>
</body>
</html>